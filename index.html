<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="600"> <!-- Refreshes every 10 mins -->
    <title>Halt Monitor</title>
    <style>
        body { font-family: "Courier New", monospace; font-size: 11px; background: #000; color: #0f0; margin: 0; }
        table { width: 100%; border-collapse: collapse; table-layout: fixed; }
        th, td { border: 1px solid #333; padding: 2px 4px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        th { background: #111; color: #aaa; text-align: left; font-weight: normal; }
        .no-resume { background-color: #ffff00 !important; color: #000; font-weight: bold; }
        tr:hover { background: #222; }
    </style>
</head>
<body>
    <table id="haltTable">
        <thead>
            <tr>
                <th style="width: 20%;">Sym</th>
                <th style="width: 40%;">Reason</th>
                <th style="width: 20%;">HaltT</th>
                <th style="width: 20%;">ResumeT</th>
            </tr>
        </thead>
        <tbody id="haltBody">
            <!-- Data injected here -->
        </tbody>
    </table>

    <script>
        async function fetchHalts() {
            try {
                // NYSE public API endpoint for current day halts
                const response = await fetch('https://www.nyse.com/api/trade-halts/current');
                const data = await response.json();
                const tbody = document.getElementById('haltBody');
                tbody.innerHTML = '';

                data.forEach(item => {
                    const tr = document.createElement('tr');
                    
                    // Logic: Highlight if Resume Time is empty or null
                    const resumeTime = item.resumeTime || '';
                    if (!resumeTime || resumeTime.trim() === '') {
                        tr.className = 'no-resume';
                    }

                    tr.innerHTML = `
                        <td>${item.symbol}</td>
                        <td>${item.reason}</td>
                        <td>${item.haltTime}</td>
                        <td>${resumeTime}</td>
                    `;
                    tbody.appendChild(tr);
                });
            } catch (e) {
                console.error("Data fetch failed:", e);
            }
        }
        fetchHalts();
    </script>
</body>
</html>
